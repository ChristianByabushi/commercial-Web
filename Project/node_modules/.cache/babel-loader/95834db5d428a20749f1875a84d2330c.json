{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"listaccount\",\n  data: () => ({\n    headerUsers: [{\n      text: 'id',\n      align: 'start',\n      sortable: true,\n      value: 'id'\n    }, {\n      text: 'Nom',\n      value: 'firstname'\n    }, {\n      text: 'Prénom',\n      value: 'lastname'\n    }, {\n      text: 'email',\n      value: 'email'\n    }, {\n      text: 'Date de creattion',\n      value: 'created_at'\n    }, {\n      text: 'actions',\n      value: 'actions'\n    }],\n    header_usersData: [],\n    scope: \"decl\",\n    items_scope: [{\n      scope: 'agent',\n      title: 'Agent'\n    }, {\n      scope: 'decl',\n      title: 'Déclarant'\n    }, {\n      scope: 'receptionniste',\n      title: 'Réceptionniste'\n    }]\n  }),\n  methods: {\n    async get_users() {\n      let id = String(this.scope);\n      if (id == null) id = \"decl\";\n\n      try {\n        const response = await axios.post(\"user/getAllUsers/\" + id);\n        this.header_usersData = response.data;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    async deleteUser(item) {\n      let id = item.id;\n\n      if (confirm(\"voulez-vous vraiment supprimer ce compte\")) {\n        try {\n          const response = await axios.post(\"user/delete/\" + id);\n          this.header_usersData = response.data;\n          this.get_users();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    }\n\n  },\n\n  beforeMount() {\n    this.get_users();\n  }\n\n};","map":{"version":3,"mappings":"AA8BA;AACA;EACAA,mBADA;EAEAC;IACAC,cACA;MACAC,UADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;IAAA,CAXA,CADA;IAcAC,oBAdA;IAeAC,aAfA;IAgBAC,cACA;MACAD,cADA;MAEAE;IAFA,CADA,EAKA;MACAF,aADA;MAEAE;IAFA,CALA,EASA;MACAF,uBADA;MAEAE;IAFA,CATA;EAhBA,EAFA;EAkCAC;IACA;MACA;MACA,gBACAC;;MACA;QACA;QACA;MACA,CAHA,CAGA;QACAC;MACA;IACA,CAXA;;IAaA;MACA;;MACA;QACA;UACA;UACA;UACA;QACA,CAJA,CAIA;UACAA;QACA;MACA;IACA;;EAxBA,CAlCA;;EA4DAC;IACA;EACA;;AA9DA","names":["name","data","headerUsers","text","align","sortable","value","header_usersData","scope","items_scope","title","methods","id","console","beforeMount"],"sourceRoot":"src/views/admin","sources":["listusers.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<v-col lg=\"6\" cols=\"5\">\r\n\t\t\t<v-row >\r\n\t\t\t\t<v-select @change=\"get_users()\" v-model=\"scope\" :items=\"items_scope\" item-text=\"title\"\r\n\t\t\t\t\tlabel=\"Type d'utilisateur\" item-value=\"scope\" class=\"userSelect\">\r\n\t\t\t\t</v-select>\r\n\t\t\t</v-row>\r\n\t\t\t<v-row>\r\n\t\t\t\t<v-text-field rounded outlined placeholder=\"Rechercher ici\" append-icon=\"mdi-magnify\" dense>\r\n\t\t\t\t</v-text-field>\r\n\t\t\t</v-row>\r\n\t\t</v-col>\r\n\t\t<v-data-table :headers=\"headerUsers\" :items=\"header_usersData\" :items-per-page=\"5\" class=\"elevation-1\">\r\n\t\t\t<template v-slot:item.actions=\"{ item }\" class=\"d-flex justify-space-between align-center\">\r\n\t\t\t\t<v-btn x-small class=\"btnAction\" color=\"info\" link\r\n\t\t\t\t\t:to=\"{ name: 'editaccount', params: { id: item.id } }\">\r\n\t\t\t\t\t<v-icon x-small color=\"purple\"> mdi-pencil\r\n\t\t\t\t\t</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn x-small color @click=\"deleteUser(item);\">\r\n\t\t\t\t\t<v-icon x-small color=\"error\"> mdi-delete\r\n\t\t\t\t\t</v-icon>\r\n\t\t\t\t</v-btn>\r\n\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n\tname: \"listaccount\",\r\n\tdata: () => ({\r\n\t\theaderUsers: [\r\n\t\t\t{\r\n\t\t\t\ttext: 'id',\r\n\t\t\t\talign: 'start',\r\n\t\t\t\tsortable: true,\r\n\t\t\t\tvalue: 'id',\r\n\t\t\t},\r\n\t\t\t{ text: 'Nom', value: 'firstname' },\r\n\t\t\t{ text: 'Prénom', value: 'lastname' },\r\n\t\t\t{ text: 'email', value: 'email' },\r\n\t\t\t{ text: 'Date de creattion', value: 'created_at' },\r\n\t\t\t{ text: 'actions', value: 'actions' },\r\n\t\t],\r\n\t\theader_usersData: [],\r\n\t\tscope: \"decl\",\r\n\t\titems_scope: [\r\n\t\t\t{\r\n\t\t\t\tscope: 'agent',\r\n\t\t\t\ttitle: 'Agent'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tscope: 'decl',\r\n\t\t\t\ttitle: 'Déclarant'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tscope: 'receptionniste',\r\n\t\t\t\ttitle: 'Réceptionniste'\r\n\t\t\t},\r\n\t\t]\r\n\r\n\t}),\r\n\tmethods: {\r\n\t\tasync get_users() {\r\n\t\t\tlet id = String(this.scope)\r\n\t\t\tif (id == null)\r\n\t\t\t\tid = \"decl\"\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post(\"user/getAllUsers/\" + id)\r\n\t\t\t\tthis.header_usersData = response.data\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync deleteUser(item) {\r\n\t\t\tlet id = item.id\r\n\t\t\tif (confirm(\"voulez-vous vraiment supprimer ce compte\")) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await axios.post(\"user/delete/\" + id)\r\n\t\t\t\t\tthis.header_usersData = response.data\r\n\t\t\t\t\tthis.get_users()\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbeforeMount() {\r\n\t\tthis.get_users()\r\n\t}\r\n}\r\n</script>\r\n<style>\r\n.userSelect {\r\n\twidth: 35%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}