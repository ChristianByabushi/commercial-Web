{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"edit_stock_item\",\n  props: [\"info_stock_item\", \"prop_merchandises\"],\n\n  data() {\n    return {\n      title_merchandise: '',\n      id_merchandise: '',\n      id_stock: '',\n      created_at: '',\n      decrease: '',\n      pu_by: '',\n      saler: '',\n      merchandises_id: [],\n      merchandises_title: [],\n      amount_by: '',\n      items_salers: ['Bralima', 'Shalina', 'Dar-salem', 'Kivu Busness']\n    };\n  },\n\n  mounted() {\n    this.created_at = this.info_stock_item.created_at;\n    this.title_merchandise = this.info_stock_item.title;\n    this.amount_by = this.info_stock_item.amount_by;\n    this.pu_by = this.info_stock_item.pu_by;\n    this.date = this.info_stock_item.date;\n    this.decrease = this.info_stock_item.decrease;\n    this.id_merchandise = this.info_stock_item.id_merchandise;\n    this.description = this.info_stock_item.description;\n    this.saler = this.info_stock_item.saler;\n    this.prop_merchandises.forEach(element => {\n      this.merchandises_title.push(element.title);\n    });\n  },\n\n  methods: {\n    emitForHideEditForm() {\n      this.$emit('event-setting-hide-edit-stock-form', {\n        editStockItem: false\n      });\n    },\n\n    findIdMerchandise() {\n      this.prop_merchandises.forEach(element => {\n        if (element.title == this.title_merchandise) {\n          this.id_merchandise = element.id;\n        }\n      });\n    },\n\n    async edit_stock_item() {\n      try {\n        if (this.id_merchandise != '') {\n          const formData = new FormData();\n          formData.append('id_merchandise', this.id_merchandise);\n          formData.append('pu_by', this.pu_by);\n          formData.append('decrease', this.decrease);\n          formData.append('amount_by', this.amount_by);\n          formData.append('created_at', this.date);\n          formData.append('saler', this.saler);\n          const response = await axios.post('stock_merchandise/edit/' + this.id_stock, formData);\n          alert(\"Stockage de l'item \" + this.id_stock + \" édité avec succès\");\n        } else {\n          alert(\"Veuillez compléter le formulaire comme il se doit, surtout ne pas oublier de selectionner un bien!\");\n        }\n      } catch (e) {\n        alert(e);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAuCA;AACA;EACAA,uBADA;EAEAC,+CAFA;;EAGAC;IACA;MACAC,qBADA;MAEAC,kBAFA;MAGAC,YAHA;MAIAC,cAJA;MAKAC,YALA;MAMAC,SANA;MAOAC,SAPA;MAQAC,mBARA;MASAC,sBATA;MAUAC,aAVA;MAWAC;IAXA;EAaA,CAjBA;;EAiBAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;MACA;IACA,CAFA;EAGA,CA/BA;;EAgCAC;IAEAC;MACA;QAAAC;MAAA;IACA,CAJA;;IAIAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CAVA;;IAWA;MACA;QACA;UACA;UACAC;UACAA;UACAA;UACAA;UACAA;UACAA;UACA;UACAC;QACA,CAVA,MAUA;UACAA;QACA;MACA,CAdA,CAcA;QACAA;MACA;IACA;;EA7BA;AAhCA","names":["name","props","data","title_merchandise","id_merchandise","id_stock","created_at","decrease","pu_by","saler","merchandises_id","merchandises_title","amount_by","items_salers","mounted","methods","emitForHideEditForm","editStockItem","findIdMerchandise","formData","alert"],"sourceRoot":"src/views/merchandise","sources":["edit_stock_item.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<v-container>\r\n\t\t\t<h4>Editer stock record <small>{{id_stock}}</small> </h4>\r\n\t\t\t<v-row>\r\n\t\t\t\t<v-form @submit.prevent=\"edit_stock_item()\">\r\n\r\n\t\t\t\t\t<v-select :items=\"merchandises_title\" v-model=\"title_merchandise\" label=\"Bien à stocker\"></v-select>\r\n\t\t\t\t\t<v-text-field v-model=\"created_at\" type=\"date\" label=\"Date\" required> </v-text-field>\r\n\t\t\t\t\t<v-text-field v-model=\"pu_by\" label=\"Prix unitaire ($)\" required type=\"number\"> </v-text-field>\r\n\t\t\t\t\t<v-text-field v-model=\"amount_by\" type=\"number\" label=\"Nbre d'unités\"> </v-text-field>\r\n\t\t\t\t\t<v-text-field v-model=\"decrease\" type=\"number\" label=\"Reduction reçue lors de l'achat\">\r\n\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t<v-select :items=\"items_salers\" v-model=\"saler\" label=\"Fournisseur\" required></v-select>\r\n\t\t\t\t\t<v-alert dense type=\"info\" color=\"#717175\">\r\n\t\t\t\t\t\tLe prix total avec reduction incluse vaut {{ pu_by*amount_by-decrease}}\r\n\t\t\t\t\t</v-alert>\r\n\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t<v-btn type=\"submit\" @click=\"findIdMerchandise();\" class=\"d-flex justify-start\">\r\n\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col class=\"mb-2\">\r\n\t\t\t\t\t\t\t<v-btn class=\"d-flex justify-end\" @click=\"emitForHideEditForm()\">\r\n\t\t\t\t\t\t\t\tAnnuler\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\r\n\t\t\t\t</v-form>\r\n\r\n\t\t\t</v-row>\r\n\t\t</v-container>\r\n\t</div>\r\n\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n\tname: \"edit_stock_item\",\r\n\tprops: [\"info_stock_item\", \"prop_merchandises\"],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle_merchandise: '',\r\n\t\t\tid_merchandise: '',\r\n\t\t\tid_stock: '',\r\n\t\t\tcreated_at: '',\r\n\t\t\tdecrease: '',\r\n\t\t\tpu_by: '',\r\n\t\t\tsaler: '',\r\n\t\t\tmerchandises_id: [],\r\n\t\t\tmerchandises_title: [],\r\n\t\t\tamount_by: '',\r\n\t\t\titems_salers: ['Bralima', 'Shalina', 'Dar-salem', 'Kivu Busness'],\r\n\t\t}\r\n\t}, mounted() {\r\n\t\tthis.created_at = this.info_stock_item.created_at\r\n\t\tthis.title_merchandise = this.info_stock_item.title\r\n\t\tthis.amount_by = this.info_stock_item.amount_by\r\n\t\tthis.pu_by = this.info_stock_item.pu_by\r\n\t\tthis.date = this.info_stock_item.date\r\n\t\tthis.decrease = this.info_stock_item.decrease\r\n\t\tthis.id_merchandise = this.info_stock_item.id_merchandise\r\n\t\tthis.description = this.info_stock_item.description\r\n\t\tthis.saler = this.info_stock_item.saler\r\n\r\n\t\tthis.prop_merchandises.forEach(element => {\r\n\t\t\tthis.merchandises_title.push(element.title)\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\r\n\t\temitForHideEditForm() {\r\n\t\t\tthis.$emit('event-setting-hide-edit-stock-form', { editStockItem: false })\r\n\t\t}, findIdMerchandise() {\r\n\t\t\tthis.prop_merchandises.forEach(element => {\r\n\t\t\t\tif (element.title == this.title_merchandise) {\r\n\t\t\t\t\tthis.id_merchandise = element.id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync edit_stock_item() {\r\n\t\t\ttry {\r\n\t\t\t\tif (this.id_merchandise != '') {\r\n\t\t\t\t\tconst formData = new FormData()\r\n\t\t\t\t\tformData.append('id_merchandise', this.id_merchandise)\r\n\t\t\t\t\tformData.append('pu_by', this.pu_by)\r\n\t\t\t\t\tformData.append('decrease', this.decrease)\r\n\t\t\t\t\tformData.append('amount_by', this.amount_by)\r\n\t\t\t\t\tformData.append('created_at', this.date)\r\n\t\t\t\t\tformData.append('saler', this.saler)\r\n\t\t\t\t\tconst response = await axios.post('stock_merchandise/edit/' + this.id_stock, formData)\r\n\t\t\t\t\talert(\"Stockage de l'item \" + this.id_stock + \" édité avec succès\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"Veuillez compléter le formulaire comme il se doit, surtout ne pas oublier de selectionner un bien!\")\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\talert(e)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}