{"ast":null,"code":"import alert from '@/components/alert.vue';\nimport axios from 'axios';\nexport default {\n  name: \"Dashboard\",\n  components: {\n    alert\n  },\n  data: () => ({\n    specificResult: [],\n    generalResult: [],\n    created_at: new Date().toJSON().slice(0, 10).replace(/-/g, '-'),\n    DetailsItems: [],\n    dialog: false,\n    addNewMerchandise: false,\n    addNewStockItem: false,\n    editNewMerchandise: false,\n    editStockItem: false,\n    infoMerchandise: '',\n    infoStockMerchandise: '',\n    header_merchandises: [{\n      text: 'id',\n      align: 'start',\n      sortable: true,\n      value: 'id'\n    }, {\n      text: 'Libéllé',\n      value: 'title'\n    }, {\n      text: 'Categorie',\n      value: 'categorie'\n    }, {\n      text: 'Description',\n      value: 'description'\n    }, {\n      text: 'Date',\n      value: 'created_at'\n    }, {\n      text: 'action',\n      value: 'actions'\n    }],\n    merchandises: [],\n    stock_merchandises: [],\n    header_stocks: [{\n      text: 'id_stock',\n      align: 'start',\n      sortable: true,\n      value: 'id_stock'\n    }, {\n      text: 'Bien',\n      value: 'title'\n    }, {\n      text: 'Pu',\n      value: 'pu_by'\n    }, {\n      text: 'Qté',\n      value: 'amount_by'\n    }, {\n      text: 'Reduction',\n      value: 'decrease'\n    }, {\n      text: 'Prix Total',\n      value: 'total_price'\n    }, {\n      text: 'Date Enreg',\n      value: 'created_at'\n    }, {\n      text: 'fournisseur',\n      value: 'saler'\n    }, {\n      text: 'actions',\n      value: 'actions'\n    }]\n  }),\n  methods: {\n    async getDashboardanalysis() {\n      try {\n        const response = await axios.post('lineInvoice/dashboardanalysis/' + this.getDate());\n        var result = response.data;\n        this.specificResult = [{\n          title: \"Total de produits achétés\",\n          color: \"#FD00FFFF\",\n          amounts: result.totalAmountby.totalAmountBought + ' Units'\n        }, {\n          title: 'Total de produits Vendus',\n          color: '#FF8800FF',\n          amounts: result.totalAmountSold.totalAmountSold + ' Units'\n        }, {\n          title: 'Le plus grand résulat réalisé',\n          color: '#00B8FFFF',\n          amounts: result.highSoldAchieved.result + ' $ '\n        }, {\n          title: 'Différence entre les achats et les ventes',\n          color: '#00FF69DE',\n          amounts: result.getResultInvoices[1].result + ' $ '\n        }];\n        this.DetailsItems = result.DetailsItems;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    getDate() {\n      var twoWeeks = 1000 * 60 * 60 * 24 * 14;\n      var twoWeeksTime = new Date(new Date().getTime() - twoWeeks);\n      var formattedDate = twoWeeksTime.getFullYear() + '-' + (twoWeeksTime.getMonth() + 1) + '-' + twoWeeksTime.getDate();\n      return formattedDate;\n    },\n\n    async get_merchandise() {\n      try {\n        const response = await axios.post('merchandise/');\n        this.merchandises = response.data;\n        console.log(this.merchandises);\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    async get_stock_merchandise() {\n      try {\n        const response = await axios.post('stock_merchandise/');\n        this.stock_merchandises = response.data;\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    async deleteMerchandiseItem(info) {\n      try {\n        if (confirm(\"Voulez vous supprimer l'item \" + info.id)) {\n          const response = await axios.post('merchandise/delete/' + info.id);\n          this.get_merchandise();\n          alert(\"Suppression réussie\");\n        }\n      } catch (e) {\n        console.log(\"Il y a une erreur. Il est imposible de supprimer un bien présent en stock!\");\n      }\n    },\n\n    async deleteMerchandiseStockItem(info) {\n      try {\n        if (confirm(\"Voulez vous supprimer l'enregistrement de l'achat \" + info.id_stock)) {\n          const response = await axios.post('stock_merchandise/delete/' + info.id_stock);\n          this.get_stock_merchandise();\n          alert(\"Suppression réussie\");\n        }\n      } catch (e) {\n        console.log(\"Il y a une erreur est survenue!\");\n      }\n    },\n\n    edit_merchandise_Item(info) {\n      this.infoMerchandise = info;\n      this.editNewMerchandise = !this.editNewMerchandise;\n    },\n\n    edit_stock_merchandise_Item(info) {\n      this.infoStockMerchandise = info;\n      this.editStockItem = !this.editStockItem;\n    },\n\n    setEditNewMerchandise(payload) {\n      this.editNewMerchandise = payload.editNewMerchandise;\n      this.get_merchandise();\n    },\n\n    setEditStockItem(payload) {\n      this.editStockItem = payload.editStockItem;\n      this.get_stock_merchandise();\n    }\n\n  },\n\n  created() {\n    this.getDashboardanalysis();\n    this.getDate();\n    this.get_merchandise();\n    this.get_stock_merchandise();\n  }\n\n};","map":{"version":3,"mappings":"AAmDA;AACA;AAEA;EACAA,iBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC,kBADA;IAEAC,iBAFA;IAGAC,+DAHA;IAIAC,gBAJA;IAMAC,aANA;IAOAC,wBAPA;IAQAC,sBARA;IASAC,yBATA;IAUAC,oBAVA;IAWAC,mBAXA;IAYAC,wBAZA;IAaAC,sBACA;MACAC,UADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;IAAA,CAXA,CAbA;IA0BAC,gBA1BA;IA2BAC,sBA3BA;IA4BAC,gBACA;MACAN,gBADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;IAAA,CAXA,EAYA;MAAAH;MAAAG;IAAA,CAZA,EAaA;MAAAH;MAAAG;IAAA,CAbA,EAcA;MAAAH;MAAAG;IAAA,CAdA;EA5BA,EALA;EAkDAI;IACA;MACA;QACA;QACA;QACA,uBACA;UAAAC;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAF;UAAAC;UAAAC;QAAA,CAFA,EAGA;UAAAF;UAAAC;UAAAC;QAAA,CAHA,EAIA;UAAAF;UAAAC;UAAAC;QAAA,CAJA;QAMA;MACA,CAVA,CAUA;QACAC;MACA;IACA,CAfA;;IAgBAC;MACA;MACA;MACA;MACA;IACA,CArBA;;IAuBA;MACA;QACA;QACA;QACAD;MACA,CAJA,CAIA;QACAA;MACA;IACA,CA/BA;;IAgCA;MACA;QACA;QACA;MACA,CAHA,CAGA;QACAA;MACA;IACA,CAvCA;;IAwCA;MACA;QACA;UACA;UACA;UACAzB;QACA;MACA,CANA,CAMA;QACAyB;MACA;IACA,CAlDA;;IAmDA;MACA;QACA;UACA;UACA;UACAzB;QACA;MACA,CANA,CAMA;QACAyB;MACA;IACA,CA7DA;;IA8DAE;MACA;MACA;IACA,CAjEA;;IAiEAC;MACA;MACA;IACA,CApEA;;IAqEAC;MACA;MACA;IACA,CAxEA;;IAyEAC;MACA;MACA;IACA;;EA5EA,CAlDA;;EAgIAC;IACA;IACA;IACA;IACA;EACA;;AArIA","names":["name","components","alert","data","specificResult","generalResult","created_at","DetailsItems","dialog","addNewMerchandise","addNewStockItem","editNewMerchandise","editStockItem","infoMerchandise","infoStockMerchandise","header_merchandises","text","align","sortable","value","merchandises","stock_merchandises","header_stocks","methods","title","color","amounts","console","getDate","edit_merchandise_Item","edit_stock_merchandise_Item","setEditNewMerchandise","setEditStockItem","created"],"sourceRoot":"src/views/merchandise","sources":["menu_merchandise.vue"],"sourcesContent":["<template>\r\n\t<div class=\"dashboard\">\r\n\t\t<v-subheader class=\"d-flex justify-space-between align-center\">\r\n\t\t\t<h3>Dashboard</h3>\r\n\t\t\t<v-btn color=\"#ffff\" link to=\"/merchandise\">\r\n\t\t\t\tVoir Details\r\n\t\t\t</v-btn>\r\n\t\t</v-subheader>\r\n\t\t<v-row>\r\n\t\t\t<v-col lg=\"6\" cols=\"12\">\r\n\t\t\t\t<v-alert dense type=\"success\" color=\"#0091EA\">\r\n\t\t\t\t\tConnexion réussie avec succès <strong>Bon travail</strong> !\r\n\t\t\t\t</v-alert>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col lg=\"4\" cols=\"12\" v-for=\"(item, index) in specificResult\" :key=\"index\">\r\n\t\t\t\t\t\t<v-card elevation=\"4\" class=\"rounded-lg\">\r\n\t\t\t\t\t\t\t<v-card-text class=\"d-flex justify-space-between align-center\">\r\n\t\t\t\t\t\t\t\t<div class=\"inline\">\r\n\t\t\t\t\t\t\t\t\t<strong>{{ item.title }}</strong>\r\n\t\t\t\t\t\t\t\t\t<small> (2 dernières semaines)</small>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<v-avatar :color=\"item.color\" size=\"60\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"\">{{ item.amounts }}</span>\r\n\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t</v-card-text>\r\n\t\t\t\t\t\t</v-card>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col lg=\"6\" cols=\"12\">\r\n\t\t\t\t<v-card>\r\n\t\t\t\t\t<v-card-title>Biens auquels sont liés les activités</v-card-title>\r\n\t\t\t\t\t<v-timeline dense>\r\n\t\t\t\t\t\t<v-timeline-item v-for=\"item in DetailsItems\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t<span slot=\"opposite\">item.title</span>\r\n\t\t\t\t\t\t\t<v-card class=\"elevation-2\">\r\n\t\t\t\t\t\t\t\t<v-card-title class=\"text-h5\">\r\n\t\t\t\t\t\t\t\t\t{{ item.categorie }}\r\n\t\t\t\t\t\t\t\t</v-card-title>\r\n\t\t\t\t\t\t\t\t<v-card-text>\r\n\t\t\t\t\t\t\t\t\t{{ item.description }}\r\n\t\t\t\t\t\t\t\t</v-card-text>\r\n\t\t\t\t\t\t\t</v-card>\r\n\t\t\t\t\t\t</v-timeline-item>\r\n\t\t\t\t\t</v-timeline>\r\n\t\t\t\t</v-card>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport alert from '@/components/alert.vue'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n\tname: \"Dashboard\",\r\n\tcomponents: {\r\n\t\talert\r\n\t},\r\n\tdata: () => ({\r\n\t\tspecificResult: [],\r\n\t\tgeneralResult: [],\r\n\t\tcreated_at: new Date().toJSON().slice(0, 10).replace(/-/g, '-'),\r\n\t\tDetailsItems: [],\r\n\r\n\t\tdialog: false,\r\n\t\taddNewMerchandise: false,\r\n\t\taddNewStockItem: false,\r\n\t\teditNewMerchandise: false,\r\n\t\teditStockItem: false,\r\n\t\tinfoMerchandise: '',\r\n\t\tinfoStockMerchandise: '',\r\n\t\theader_merchandises: [\r\n\t\t\t{\r\n\t\t\t\ttext: 'id',\r\n\t\t\t\talign: 'start',\r\n\t\t\t\tsortable: true,\r\n\t\t\t\tvalue: 'id',\r\n\t\t\t},\r\n\t\t\t{ text: 'Libéllé', value: 'title' },\r\n\t\t\t{ text: 'Categorie', value: 'categorie' },\r\n\t\t\t{ text: 'Description', value: 'description' },\r\n\t\t\t{ text: 'Date', value: 'created_at' },\r\n\t\t\t{ text: 'action', value: 'actions' },\r\n\t\t],\r\n\t\tmerchandises: [],\r\n\t\tstock_merchandises: [],\r\n\t\theader_stocks: [\r\n\t\t\t{\r\n\t\t\t\ttext: 'id_stock',\r\n\t\t\t\talign: 'start',\r\n\t\t\t\tsortable: true,\r\n\t\t\t\tvalue: 'id_stock',\r\n\t\t\t},\r\n\t\t\t{ text: 'Bien', value: 'title' },\r\n\t\t\t{ text: 'Pu', value: 'pu_by' },\r\n\t\t\t{ text: 'Qté', value: 'amount_by' },\r\n\t\t\t{ text: 'Reduction', value: 'decrease' },\r\n\t\t\t{ text: 'Prix Total', value: 'total_price' },\r\n\t\t\t{ text: 'Date Enreg', value: 'created_at' },\r\n\t\t\t{ text: 'fournisseur', value: 'saler' },\r\n\t\t\t{ text: 'actions', value: 'actions' },\r\n\t\t],\r\n\t}),\r\n\tmethods: {\r\n\t\tasync getDashboardanalysis() {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post('lineInvoice/dashboardanalysis/' + this.getDate())\r\n\t\t\t\tvar result = response.data\r\n\t\t\t\tthis.specificResult = [\r\n\t\t\t\t\t{ title: \"Total de produits achétés\", color: \"#FD00FFFF\", amounts: result.totalAmountby.totalAmountBought + ' Units' },\r\n\t\t\t\t\t{ title: 'Total de produits Vendus', color: '#FF8800FF', amounts: result.totalAmountSold.totalAmountSold + ' Units' },\r\n\t\t\t\t\t{ title: 'Le plus grand résulat réalisé', color: '#00B8FFFF', amounts: result.highSoldAchieved.result + ' $ ' },\r\n\t\t\t\t\t{ title: 'Différence entre les achats et les ventes', color: '#00FF69DE', amounts: result.getResultInvoices[1].result + ' $ ' },\r\n\t\t\t\t]\r\n\t\t\t\tthis.DetailsItems = result.DetailsItems\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDate() {\r\n\t\t\tvar twoWeeks = 1000 * 60 * 60 * 24 * 14;\r\n\t\t\tvar twoWeeksTime = new Date(new Date().getTime() - twoWeeks);\r\n\t\t\tvar formattedDate = twoWeeksTime.getFullYear() + '-' + (twoWeeksTime.getMonth() + 1) + '-' + twoWeeksTime.getDate();\r\n\t\t\treturn formattedDate\r\n\t\t},\r\n\r\n\t\tasync get_merchandise() {\r\n\t\t\ttry {  \r\n\t\t\t\tconst response = await axios.post('merchandise/')\r\n\t\t\t\tthis.merchandises = response.data \r\n\t\t\t\tconsole.log(this.merchandises)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync get_stock_merchandise() {\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await axios.post('stock_merchandise/')\r\n\t\t\t\tthis.stock_merchandises = response.data\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync deleteMerchandiseItem(info) {\r\n\t\t\ttry {\r\n\t\t\t\tif (confirm(\"Voulez vous supprimer l'item \" + info.id)) {\r\n\t\t\t\t\tconst response = await axios.post('merchandise/delete/' + info.id)\r\n\t\t\t\t\tthis.get_merchandise()\r\n\t\t\t\t\talert(\"Suppression réussie\")\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"Il y a une erreur. Il est imposible de supprimer un bien présent en stock!\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync deleteMerchandiseStockItem(info) {\r\n\t\t\ttry {\r\n\t\t\t\tif (confirm(\"Voulez vous supprimer l'enregistrement de l'achat \" + info.id_stock)) {\r\n\t\t\t\t\tconst response = await axios.post('stock_merchandise/delete/' + info.id_stock)\r\n\t\t\t\t\tthis.get_stock_merchandise()\r\n\t\t\t\t\talert(\"Suppression réussie\")\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"Il y a une erreur est survenue!\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tedit_merchandise_Item(info) {\r\n\t\t\tthis.infoMerchandise = info\r\n\t\t\tthis.editNewMerchandise = !this.editNewMerchandise\r\n\t\t}, edit_stock_merchandise_Item(info) {\r\n\t\t\tthis.infoStockMerchandise = info\r\n\t\t\tthis.editStockItem = !this.editStockItem\r\n\t\t},\r\n\t\tsetEditNewMerchandise(payload) {\r\n\t\t\tthis.editNewMerchandise = payload.editNewMerchandise\r\n\t\t\tthis.get_merchandise()\r\n\t\t},\r\n\t\tsetEditStockItem(payload) {\r\n\t\t\tthis.editStockItem = payload.editStockItem\r\n\t\t\tthis.get_stock_merchandise()\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getDashboardanalysis()\r\n\t\tthis.getDate()\r\n\t\tthis.get_merchandise()\r\n\t\tthis.get_stock_merchandise()\r\n\t}\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}